<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Display</title>
</head>
<body>

<!-- Placeholder element to display item information -->
<div id="item-list"></div>

<script>
    // Function to format the ending time
    function formatEndingTime(endingTime) {
        const date = new Date(JSON.parse(endingTime).endingAt);
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', timeZone: 'Europe/Warsaw' };
        return date.toLocaleString('pl-PL', options);
    }

    // Fetch items from the JSON file
    fetch('items.json')
        .then(response => response.json())
        .then(items => {
            // Sort items by ending time (oldest to newest)
            items.sort((a, b) => {
                const timeA = new Date(JSON.parse(a.endTime).endingAt).getTime();
                const timeB = new Date(JSON.parse(b.endTime).endingAt).getTime();
                return timeA - timeB;
            });



            // Get the HTML element to display item information
            const itemListElement = document.getElementById("item-list");

            // Iterate through the sorted items and display information
            items.forEach(item => {
    // Create a new paragraph element
    const paragraph = document.createElement("p");

    // Create a link element for the item name
    const link = document.createElement("a");
    link.href = "https://allegrolokalnie.pl" + item.href;
    link.textContent = item.name;

    // Append the link to the paragraph
    paragraph.appendChild(link);

    // Add the remaining item information to the paragraph
    paragraph.innerHTML += ` - Cena: ${item.price} zÅ‚ - Koniec aukcji: ${formatEndingTime(item.endTime)}`;

    // Append the paragraph to the item list element
    itemListElement.appendChild(paragraph);
});
        })
        .catch(error => console.error('Error fetching items:', error));
</script>

</body>
</html>